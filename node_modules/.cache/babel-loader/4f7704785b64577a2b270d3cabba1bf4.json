{"remainingRequest":"/Users/uthaya/Downloads/tplh.net-2019-master 3/node_modules/babel-loader/lib/index.js!/Users/uthaya/Downloads/tplh.net-2019-master 3/node_modules/babel-loader/lib/index.js??ref--14!/Users/uthaya/Downloads/tplh.net-2019-master 3/node_modules/eslint-loader/index.js??ref--12-0!/Users/uthaya/Downloads/tplh.net-2019-master 3/src/webgl/PostEffectBloom.js","dependencies":[{"path":"/Users/uthaya/Downloads/tplh.net-2019-master 3/src/webgl/PostEffectBloom.js","mtime":1586068672000},{"path":"/Users/uthaya/Downloads/tplh.net-2019-master 3/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/uthaya/Downloads/tplh.net-2019-master 3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/uthaya/Downloads/tplh.net-2019-master 3/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/uthaya/Downloads/tplh.net-2019-master 3/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgX2NsYXNzQ2FsbENoZWNrIGZyb20gIi9Vc2Vycy91dGhheWEvRG93bmxvYWRzL3RwbGgubmV0LTIwMTktbWFzdGVyIDMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NsYXNzQ2FsbENoZWNrIjsKaW1wb3J0IF9jcmVhdGVDbGFzcyBmcm9tICIvVXNlcnMvdXRoYXlhL0Rvd25sb2Fkcy90cGxoLm5ldC0yMDE5LW1hc3RlciAzL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBfaW5oZXJpdHMgZnJvbSAiL1VzZXJzL3V0aGF5YS9Eb3dubG9hZHMvdHBsaC5uZXQtMjAxOS1tYXN0ZXIgMy9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vaW5oZXJpdHMiOwppbXBvcnQgX2NyZWF0ZVN1cGVyIGZyb20gIi9Vc2Vycy91dGhheWEvRG93bmxvYWRzL3RwbGgubmV0LTIwMTktbWFzdGVyIDMvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2NyZWF0ZVN1cGVyIjsKaW1wb3J0ICogYXMgVEhSRUUgZnJvbSAndGhyZWUnOwppbXBvcnQgeyBlYXNlT3V0Q2lyYywgZWFzZUluT3V0Q3ViaWMgfSBmcm9tICdlYXNpbmctanMnOwppbXBvcnQgTWF0aEV4IGZyb20gJ2pzLXV0aWwvTWF0aEV4JzsKaW1wb3J0IHN0b3JlIGZyb20gJ0Avc3RvcmUnOwppbXBvcnQgdnMgZnJvbSAnQC93ZWJnbC9nbHNsL1Bvc3RFZmZlY3QudnMnOwppbXBvcnQgZnMgZnJvbSAnQC93ZWJnbC9nbHNsL1Bvc3RFZmZlY3RCbG9vbS5mcyc7CnZhciBEVVJBVElPTjEgPSAwLjI7CnZhciBEVVJBVElPTjIgPSAxLjg7CnZhciBEVVJBVElPTjMgPSAxOwp2YXIgREVMQVkgPSAyLjc7Cgp2YXIgUG9zdEVmZmVjdEJsb29tID0gLyojX19QVVJFX18qL2Z1bmN0aW9uIChfVEhSRUUkTWVzaCkgewogIF9pbmhlcml0cyhQb3N0RWZmZWN0Qmxvb20sIF9USFJFRSRNZXNoKTsKCiAgdmFyIF9zdXBlciA9IF9jcmVhdGVTdXBlcihQb3N0RWZmZWN0Qmxvb20pOwoKICBmdW5jdGlvbiBQb3N0RWZmZWN0Qmxvb20oKSB7CiAgICB2YXIgX3RoaXM7CgogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIFBvc3RFZmZlY3RCbG9vbSk7IC8vIERlZmluZSBHZW9tZXRyeQoKCiAgICB2YXIgZ2VvbWV0cnkgPSBuZXcgVEhSRUUuUGxhbmVCdWZmZXJHZW9tZXRyeSgyLCAyKTsgLy8gRGVmaW5lIE1hdGVyaWFsCgogICAgdmFyIG1hdGVyaWFsID0gbmV3IFRIUkVFLlJhd1NoYWRlck1hdGVyaWFsKHsKICAgICAgdW5pZm9ybXM6IHsKICAgICAgICB0aW1lOiB7CiAgICAgICAgICB0eXBlOiAnZicsCiAgICAgICAgICB2YWx1ZTogMAogICAgICAgIH0sCiAgICAgICAgYWxwaGE6IHsKICAgICAgICAgIHR5cGU6ICdmJywKICAgICAgICAgIHZhbHVlOiAwCiAgICAgICAgfSwKICAgICAgICByZXNvbHV0aW9uOiB7CiAgICAgICAgICB0eXBlOiAndjInLAogICAgICAgICAgdmFsdWU6IHN0b3JlLnN0YXRlLnJlc29sdXRpb24KICAgICAgICB9LAogICAgICAgIHRleHR1cmUxOiB7CiAgICAgICAgICB0eXBlOiAndCcsCiAgICAgICAgICB2YWx1ZTogbnVsbAogICAgICAgIH0sCiAgICAgICAgdGV4dHVyZTI6IHsKICAgICAgICAgIHR5cGU6ICd0JywKICAgICAgICAgIHZhbHVlOiBudWxsCiAgICAgICAgfQogICAgICB9LAogICAgICB2ZXJ0ZXhTaGFkZXI6IHZzLAogICAgICBmcmFnbWVudFNoYWRlcjogZnMKICAgIH0pOyAvLyBDcmVhdGUgT2JqZWN0M0QKCiAgICBfdGhpcyA9IF9zdXBlci5jYWxsKHRoaXMsIGdlb21ldHJ5LCBtYXRlcmlhbCk7CiAgICBfdGhpcy5uYW1lID0gJ1Bvc3RFZmZlY3RCbG9vbSc7CiAgICBfdGhpcy50aW1lU2hha2UgPSAwOwogICAgX3RoaXMudGltZUZhZGVPdXQgPSAwOwogICAgX3RoaXMuaXNTaGFraW5nID0gZmFsc2U7CiAgICBfdGhpcy5pc0ZhZGVPdXQgPSBmYWxzZTsKICAgIHJldHVybiBfdGhpczsKICB9CgogIF9jcmVhdGVDbGFzcyhQb3N0RWZmZWN0Qmxvb20sIFt7CiAgICBrZXk6ICJzdGFydCIsCiAgICB2YWx1ZTogZnVuY3Rpb24gc3RhcnQodGV4dHVyZTEsIHRleHR1cmUyKSB7CiAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMudGV4dHVyZTEudmFsdWUgPSB0ZXh0dXJlMTsKICAgICAgdGhpcy5tYXRlcmlhbC51bmlmb3Jtcy50ZXh0dXJlMi52YWx1ZSA9IHRleHR1cmUyOwogICAgfQogIH0sIHsKICAgIGtleTogInNoYWtlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBzaGFrZSgpIHsKICAgICAgdGhpcy5pc1NoYWtpbmcgPSB0cnVlOwogICAgfQogIH0sIHsKICAgIGtleTogImZhZGVPdXQiLAogICAgdmFsdWU6IGZ1bmN0aW9uIGZhZGVPdXQoKSB7CiAgICAgIHRoaXMuaXNGYWRlT3V0ID0gdGhpcy5pc1NoYWtpbmc7CiAgICB9CiAgfSwgewogICAga2V5OiAidXBkYXRlIiwKICAgIHZhbHVlOiBmdW5jdGlvbiB1cGRhdGUodGltZSkgewogICAgICB0aGlzLm1hdGVyaWFsLnVuaWZvcm1zLnRpbWUudmFsdWUgKz0gdGltZTsKCiAgICAgIGlmICh0aGlzLmlzU2hha2luZyA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMudGltZVNoYWtlICs9IHRpbWU7CiAgICAgIH0KCiAgICAgIGlmICh0aGlzLmlzRmFkZU91dCA9PT0gdHJ1ZSkgewogICAgICAgIHRoaXMudGltZUZhZGVPdXQgKz0gdGltZTsKICAgICAgfQoKICAgICAgdmFyIGFscGhhMSA9IGVhc2VPdXRDaXJjKE1hdGhFeC5jbGFtcCgodGhpcy50aW1lU2hha2UgLSBERUxBWSkgLyBEVVJBVElPTjEsIDAuMCwgMS4wKSk7CiAgICAgIHZhciBhbHBoYTIgPSBlYXNlSW5PdXRDdWJpYyhNYXRoRXguY2xhbXAoKHRoaXMudGltZVNoYWtlIC0gREVMQVkgLSBEVVJBVElPTjEpIC8gRFVSQVRJT04yLCAwLjAsIDEuMCkpOwogICAgICB2YXIgYWxwaGEzID0gZWFzZU91dENpcmMoTWF0aEV4LmNsYW1wKHRoaXMudGltZUZhZGVPdXQgLyBEVVJBVElPTjMsIDAuMCwgMS4wKSk7CiAgICAgIHRoaXMubWF0ZXJpYWwudW5pZm9ybXMuYWxwaGEudmFsdWUgPSBhbHBoYTEgKiAoMS4wIC0gYWxwaGEyKSAqICgxLjAgLSBhbHBoYTMpOwogICAgfQogIH1dKTsKCiAgcmV0dXJuIFBvc3RFZmZlY3RCbG9vbTsKfShUSFJFRS5NZXNoKTsKCmV4cG9ydCB7IFBvc3RFZmZlY3RCbG9vbSBhcyBkZWZhdWx0IH07"},{"version":3,"sources":["/Users/uthaya/Downloads/tplh.net-2019-master 3/src/webgl/PostEffectBloom.js"],"names":["DURATION1","DURATION2","DURATION3","DELAY","PostEffectBloom","THREE","Mesh","geometry","material","uniforms","time","type","value","alpha","resolution","store","texture1","texture2","vertexShader","fragmentShader","fs","alpha1","easeOutCirc","MathEx","alpha2","easeInOutCubic","alpha3"],"mappings":"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","sourcesContent":["import * as THREE from 'three';\nimport { easeOutCirc, easeInOutCubic } from 'easing-js';\nimport MathEx from 'js-util/MathEx';\n\nimport store from '@/store';\n\nimport vs from '@/webgl/glsl/PostEffect.vs';\nimport fs from '@/webgl/glsl/PostEffectBloom.fs';\n\nconst DURATION1 = 0.2;\nconst DURATION2 = 1.8;\nconst DURATION3 = 1;\nconst DELAY = 2.7;\n\nexport default class PostEffectBloom extends THREE.Mesh {\n  constructor() {\n    // Define Geometry\n    const geometry = new THREE.PlaneBufferGeometry(2, 2);\n\n    // Define Material\n    const material = new THREE.RawShaderMaterial({\n      uniforms: {\n        time: {\n          type: 'f',\n          value: 0\n        },\n        alpha: {\n          type: 'f',\n          value: 0\n        },\n        resolution: {\n          type: 'v2',\n          value: store.state.resolution\n        },\n        texture1: {\n          type: 't',\n          value: null\n        },\n        texture2: {\n          type: 't',\n          value: null\n        }\n      },\n      vertexShader: vs,\n      fragmentShader: fs\n    });\n\n    // Create Object3D\n    super(geometry, material);\n    this.name = 'PostEffectBloom';\n    this.timeShake = 0;\n    this.timeFadeOut = 0;\n    this.isShaking = false;\n    this.isFadeOut = false;\n  }\n  start(texture1, texture2) {\n    this.material.uniforms.texture1.value = texture1;\n    this.material.uniforms.texture2.value = texture2;\n  }\n  shake() {\n    this.isShaking = true;\n  }\n  fadeOut() {\n    this.isFadeOut = this.isShaking;\n  }\n  update(time) {\n    this.material.uniforms.time.value += time;\n\n    if (this.isShaking === true) {\n      this.timeShake += time;\n    }\n    if (this.isFadeOut === true) {\n      this.timeFadeOut += time;\n    }\n\n    const alpha1 = easeOutCirc(\n      MathEx.clamp((this.timeShake - DELAY) / DURATION1, 0.0, 1.0)\n    );\n    const alpha2 = easeInOutCubic(\n      MathEx.clamp((this.timeShake - DELAY - DURATION1) / DURATION2, 0.0, 1.0)\n    );\n    const alpha3 = easeOutCirc(\n      MathEx.clamp(this.timeFadeOut / DURATION3, 0.0, 1.0)\n    );\n    this.material.uniforms.alpha.value =\n      alpha1 * (1.0 - alpha2) * (1.0 - alpha3);\n  }\n}\n"]}]}